

# 管道模型

最最传统的模型就是软件开发的瀑布模型(Waterfall Model) 

从管道的这个名称可以看出来，管道是一 种单向传输数据的机制，它其实是一段缓存，里面的数据只能从一端写入，从另一端读出。如果想互相通信，我们需要创建两 个管道才行。

“|” 表示的管道称为匿名管道，意思就是这个类型的管道没有名字，用完了就销毁了。


另外一种类型是命名管道  
mkfifo hello



# 消息队列模型

这种模型类似进程间通信的消息队列模型。和管道将信息一股脑儿地从一个进程，倒给另一个进程不同，
消息队列有点儿像邮 件，发送数据时，会分成一个一个独立的数据单元，也就是消息体，每个消息体都是固定大小的存储块，在字节流上不连续。

我们可以指定一个文件，ftok会根据这个文件的inode，生成一个近乎唯一的key。只要在这个消息队列的生命周期内，这个文 件不要被删除就可以了。
只要不删除，无论什么时刻，再调用ftok，也会得到同样的key。这种key的使用方式在这一章会经常 遇到，这是因为它们都属于System V IPC进程间通信机制体系中。

我们需要创建一个消息队列，使用msgget函数

发送消息主要调用msgsnd函数

收消息主要调用msgrcv函数

有了消息这种模型，两个进程之间的通信就像咱们平时发邮件一样，你来一封，我回一封，可以频繁沟通了。


# 共享内存模型

共享内存也是System V IPC进程间通信机制体系中的，所以从它使用流程可以看到熟悉的面孔。

# 信号量
我们可以将信号量初始化为一个数值，来代表某种资源的总体数量。对于信号量来讲，会定义两种原子操作，一个是P操作， 
我们称为申请资源操作。这个操作会申请将信号量的数值减去N，表示这些数量被他申请使用了，
其他人不能用了。另一个 是V操作，我们称为归还资源操作，这个操作会申请将信号量加上M，表示这些数量已经还给信号量了，其他人可以使用了。


# 信号

上面讲的进程间通信的方式，都是常规状态下的工作模式，对应到咱们平时的工作交接，收发邮件、联合开发等，其实还有一 种异常情况下的工作模式。

当你自己使用的时候，可以根据不同的通信需要，选择不同的模式。

管道，请你记住这是命令行中常用的模式，面试问到的话，不要忘了。
 
消息队列其实很少使用，因为有太多的用户级别的消息队列，功能更强大。 
 
共享内存加信号量是常用的模式。这个需要牢记，常⻅到一些知名的以C语言开发的开源软件都会用到它。 

信号更加常用，机制也比较复杂。我们后面会有单独的一节来解析。